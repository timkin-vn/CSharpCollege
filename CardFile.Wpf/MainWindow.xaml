<Window x:Class="CardFile.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CardFile.Wpf" 
        xmlns:viewmodels="clr-namespace:CardFile.Wpf.ViewModels"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
        Title="{Binding WindowTitle}" Height="650" Width="900" MinHeight="400" MinWidth="600"
        Loaded="Window_Loaded" Initialized="Window_Initialized">

    <Window.DataContext>
        <viewmodels:MainWindowViewModel />
    </Window.DataContext>

    <Window.Resources>
        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type DataGridCell}">
                        <Border Padding="{TemplateBinding Padding}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Файл">
                <MenuItem Header="_Открыть..." Click="FileOpen_Click"/>
                <MenuItem Header="_Сохранить" Click="FileSave_Click"/>
                <MenuItem Header="Сохранить _как..." Click="FileSaveAs_Click"/>
                <Separator/>
                <MenuItem Header="В_ыход" Click="FileExit_Click"/>
            </MenuItem>
            <MenuItem Header="_Фильтры">
                <MenuItem Header="Все" Command="{Binding ResetFilterCommand}"/>
                <MenuItem Header="Танки" Command="{Binding FilterCommand}" CommandParameter="Танк"/>
                <MenuItem Header="Самолёты" Command="{Binding FilterCommand}" CommandParameter="Самолёт"/>
                <MenuItem Header="Корабли" Command="{Binding FilterCommand}" CommandParameter="Корабль"/>
            </MenuItem>
        </Menu>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Панель поиска -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
                <TextBox Width="200" Margin="0,0,5,0" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/>
                <Button Content="Поиск" Command="{Binding SearchCommand}"/>
            </StackPanel>

            <!-- Основная таблица -->
            <DataGrid Grid.Row="1" Margin="5" 
                     ItemsSource="{Binding Cards}" 
                     SelectedItem="{Binding SelectedCard}" 
                     AutoGenerateColumns="False"
                     IsReadOnly="True" 
                     CanUserAddRows="False" 
                     SelectionMode="Single">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Название" Binding="{Binding Name}" Width="150"/>
                    <DataGridTextColumn Header="Тип" Binding="{Binding Type}" Width="100"/>
                    <DataGridTextColumn Header="Производитель" Binding="{Binding Manufacturer}" Width="120"/>
                    <DataGridTextColumn Header="Конструктор" Binding="{Binding Designer}" Width="150"/>
                    <DataGridTextColumn Header="Год выпуска" Binding="{Binding ProductionYear}" Width="80"/>
                    <DataGridTextColumn Header="Скорость (км/ч)" Binding="{Binding MaxSpeed}" Width="90"/>
                    <DataGridTextColumn Header="Орудие" Binding="{Binding Gun}" Width="120"/>
                    <DataGridTextColumn Header="Вес (т)" Binding="{Binding Weight}" Width="80"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- Панель кнопок -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Создать" Margin="5" Padding="10,5" Click="CreateButton_Click"/>
                <Button Content="Изменить" IsEnabled="{Binding IsEditEnabled}" Margin="5" Padding="10,5" Click="EditButton_Click"/>
                <Button Content="Удалить" IsEnabled="{Binding IsDeleteEnabled}" Margin="5" Padding="10,5" Click="DeleteButton_Click"/>
            </StackPanel>
        </Grid>
    </DockPanel>
</Window>