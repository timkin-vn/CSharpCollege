<Window x:Class="FifteenGame.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewmodels="clr-namespace:FifteenGame.Wpf.ViewModels"
        mc:Ignorable="d"
        Title="2048 Game" Height="550" Width="500"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <viewmodels:MainWindowViewModel />
    </Window.DataContext>

    <DockPanel Margin="10">
        <TextBlock DockPanel.Dock="Top" Text="{Binding Score}" FontSize="24" FontWeight="Bold" 
                   HorizontalAlignment="Right" Margin="0,0,10,10"/>

        <Viewbox Stretch="Uniform">
            <Grid Width="400" Height="400"
                  Background="#faf8ef"
                  MouseDown="GameField_MouseDown"
                  MouseUp="GameField_MouseUp">

                <ItemsControl ItemsSource="{Binding Cells}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <UniformGrid Rows="4" Columns="4"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="5"
                                    CornerRadius="10"
                                    Background="LightBlue"
                                    BorderBrush="#bbada0"
                                    BorderThickness="2">
                                <TextBlock Text="{Binding Text}"
                                           FontSize="28"
                                           FontWeight="Bold"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>

                    <ItemsControl.ItemContainerStyle>
                        <Style TargetType="ContentPresenter">
                            <Setter Property="Grid.Row" Value="{Binding Row}" />
                            <Setter Property="Grid.Column" Value="{Binding Column}" />
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                </ItemsControl>

            </Grid>
        </Viewbox>
    </DockPanel>
</Window>
